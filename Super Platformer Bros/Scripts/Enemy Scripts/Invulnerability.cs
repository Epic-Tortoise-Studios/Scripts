using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    private bool isSuperSaiyan = true;

    float invulTimer;
    public float InvulTimer;

    private PlayerAbilities playerAbilities;
    private GameObject player;
    public GameObject enemySuperSaiyan;

    void Start()
    {
        player = GameObject.FindGameObjectWithTag("Player");
        playerAbilities = player.GetComponent<PlayerAbilities>();
        invulTimer = InvulTimer;
        Invulnerable();
    }

    void Update()
    {
        invulTimer -= Time.deltaTime;
        if (invulTimer <= 0)
        {
            if (isSuperSaiyan == true)
            {
                isSuperSaiyan = false;
                Destroy(GameObject.FindWithTag("EnemySuperSaiyan")); ;
                invulTimer = InvulTimer;
            }
            else if (isSuperSaiyan == false)
            {
                isSuperSaiyan = true;
                Invulnerable();
                invulTimer = InvulTimer;
            }
        }

    }

    public void Invulnerable()
    {
        Instantiate(enemySuperSaiyan, transform);
    }

    public void OnTriggerEnter(Collider other)
    {
        if (other.tag == "Player")
        {
            if (isSuperSaiyan == false)
            {
                playerAbilities.invulnerablePower = true;
                playerAbilities.speedPower = false;
                playerAbilities.jumpPower = false;
                playerAbilities.shootPower = false;
                Destroy(transform.parent.gameObject);
            }
        }
    }
}


